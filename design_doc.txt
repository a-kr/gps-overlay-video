Необходимо написать высокопроизводительную программу на Go, которая берёт GPX-файл с активностью и генерирует на его основе прозрачное оверлей-видео с картой и индикаторами.

## Основные требования

1.  **Входные данные**: GPX-файл с треком активности.
2.  **Выходные данные**: Прозрачное видео в формате MP4 (кодек h264), содержащее виджет с картой и текстовые индикаторы.
3.  **Производительность**: Генерация видео должна быть максимально быстрой за счет эффективного использования всех ядер CPU (параллельная обработка).

## Параметры программы (опции командной строки)

*   `-gpx`: Путь к GPX-файлу (по умолчанию: `example.gpx`).
*   `-o`: Имя выходного видеофайла (по умолчанию: `output_go.mp4`).
*   `-widget-size`: Диаметр виджета карты в пикселях (по умолчанию: `300`).
*   `-map-zoom`: Уровень масштабирования карты (по умолчанию: `15`).
*   `-style`: Стиль карты. Доступные варианты: `default`, `cyclosm`, `toner`, `clockwork`, `thunderforest`, `positron`, `outdoor` (по умолчанию: `default`).
*   `-framerate`: Частота кадров в секунду (по умолчанию: `23.976`).
*   `-bitrate`: Битрейт видео (по умолчанию: `5M`).
*   `-workers`: Количество потоков для генерации кадров (по умолчанию: количество ядер CPU в системе).
*   `-path-width`: Толщина линии пройденного пути (по умолчанию: `4`).
*   `-path-color`: Цвет линии пройденного пути в формате hex (по умолчанию: `#FF0000`).
*   `-border-color`: Цвет рамки вокруг карты в формате hex (по умолчанию: `#FFFFFF`).

## Логика генерации видео

*   **Длительность**: Длительность видео должна точно соответствовать временному промежутку активности в GPX-файле.
*   **Синхронизация**: Каждый кадр видео должен соответствовать интерполированной географической позиции в треке на данный момент времени.
*   **Кодирование**: Кадры должны генерироваться и передаваться напрямую в `ffmpeg` без сохранения на диске.

## Виджет карты

*   **Форма**: Карта отображается в виде круглого виджета.
*   **Центрирование**: Текущая позиция пользователя всегда находится в центре круга.
*   **Динамическая подгрузка тайлов**: Программа должна динамически рассчитывать необходимый набор тайлов для полного покрытия виджета карты (в зависимости от его размера и текущего масштаба) и подгружать их с запасом в 1 тайл по периметру, чтобы избежать пустых областей на краях.
*   **Рамка**: Вокруг карты рисуется цветная рамка, толщина которой составляет 4% от диаметра виджета.

## Стили и кэширование карт

*   **Выбор стиля**: Реализовать поддержку нескольких стилей карт, выбираемых через параметр `-style`.
*   **Шаблоны URL**: Для каждого стиля используется свой шаблон URL для загрузки тайлов. Некоторые стили могут требовать кастомные HTTP-заголовки (например, `Referer`).
    *   `default`: `https://tile.openstreetmap.org/{z}/{x}/{y}.png`
    *   `cyclosm`: `https://c.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png`
    *   `toner`: `https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png` (заголовок `Referer: https://mc.bbbike.org/`)
    *   `clockwork`: `https://maps.clockworkmicro.com/streets/v1/raster/{z}/{x}/{y}?x-api-key=2d33HqvhuU3z6lPsPOqQR6Zwl2LQ2pmo9NnWbboL`
    *   `thunderforest`: `https://c.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey=6170aad10dfd42a38d4d8c709a536f38`
    *   `positron`: `https://d.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png`
    *   `outdoor`: `https://api.maptiler.com/maps/outdoor-v2/256/{z}/{x}/{y}.png?key=jsK0th32A1xWq2x6QeVu`
*   **Кэширование**: Тайлы для каждого стиля должны кэшироваться в своей поддиректории: `tiles/{style_name}/{z}/{x}/{y}.png`.

## Индикаторы и компоновка

*   **Состав**: Под картой должны отображаться три числовых индикатора:
    1.  Пройденное расстояние (км)
    2.  Текущая скорость (км/ч)
    3.  Текущий уклон (%)
*   **Размер видео**: Размер итогового видео должен вычисляться автоматически, чтобы вместить виджет карты и текстовые индикаторы с небольшими отступами (padding).
*   **Расположение**: Виджет карты располагается в правой части кадра. Индикаторы — под ним, с выравниванием по левому краю виджета.

## Пользовательский опыт

*   Во время выполнения должны отображаться прогресс-бары для скачивания тайлов и для процесса кодирования видео.